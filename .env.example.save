#!/bin/bash
# Quick setup script for CafÃ© Chatbot
# Run this after cloning the repository

set -e  # Exit on error

echo "ğŸš€ Setting up CafÃ© Chatbot..."

# Create virtual environment
echo "ğŸ“¦ Creating virtual environment..."
python3 -m venv venv

# Activate virtual environment
echo "âœ… Activating virtual environment..."
source venv/bin/activate

# Install dependencies
echo "ğŸ“š Installing dependencies..."
pip install --upgrade pip
pip install -r requirements.txt

# Create .env file if it doesn't exist
if [ ! -f .env ]; then
    echo "âš™ï¸ Creating .env file..."
    cp .env.example .env
    # Groq API Configuration
    echo "âš ï¸ IMPORTANT: Edit .env and add your GROQ_API_KEY"
    # Get your API key from: https://console.groq.com/keys
    GROQ_API_KEY=your_groq_api_key_here
    GROQ_MODEL=llama-3.3-70b-versatile

    # Data Paths (relative to project root)
    INDEX_DIR=./index
    MASTER_OUTLET=./output/master_outlet_v2.csv
    MASTER_PRODUCT=./output/master_product_v2.csv

    # Server Configuration
    HOST=127.0.0.1
    PORT=8000
else
    echo "âœ… .env file already exists"
fi

# Create necessary directories
echo "ğŸ“ Creating directories..."
mkdir -p screenshots
mkdir -p index
mkdir -p DataPreprocessing/output

echo ""
echo "âœ¨ Setup complete!"
echo ""
echo "ğŸ“‹ Next steps:"
echo "1. Edit .env file and add your GROQ_API_KEY"
echo "2. Run data preprocessing:"
echo "   cd DataPreprocessing"
echo "   python3 data_prep.py --data-dir '/path/to/dataset' --out-dir './output'"
echo "   cd .."
echo "3. Build index:"
echo "   python3 -m src.indexer.build_index --data-dir ./DataPreprocessing/output --out-dir ./index"
echo "4. Start API server:"
echo "   python3 main.py"
echo "5. Start Streamlit UI (in new terminal):"
echo "   streamlit run src/UI/frontend.py"
echo ""